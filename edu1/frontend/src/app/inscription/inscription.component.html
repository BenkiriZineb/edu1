<div class="inscription-container">
  <div class="inscription-header">
    <h1>Inscription</h1>
    <p>Rejoignez notre plateforme √©ducative</p>
  </div>

  <!-- Messages d'erreur et de succ√®s -->
  <div *ngIf="errorMessage" class="alert alert-danger">
      <strong>Erreur :</strong> {{ errorMessage }}
    <button type="button" class="btn-close" (click)="closeMessage('error')">√ó</button>
    </div>

  <div *ngIf="successMessage" class="alert alert-success">
      <strong>Succ√®s :</strong> {{ successMessage }}
    <button type="button" class="btn-close" (click)="closeMessage('success')">√ó</button>
    </div>

  <!-- Onglets de s√©lection des r√¥les -->
  <div class="role-tabs">
    <button 
      class="tab-btn" 
      [class.active]="activeRole === 'ELEVE'"
      (click)="setActiveRole('ELEVE')">
      <span class="tab-icon">üë®‚Äçüéì</span>
      √âl√®ve
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeRole === 'PARENT'"
      (click)="setActiveRole('PARENT')">
      <span class="tab-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
      Parent
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeRole === 'PROFESSEUR'"
      (click)="setActiveRole('PROFESSEUR')">
      <span class="tab-icon">üë®‚Äçüè´</span>
      Enseignant
    </button>
    <button 
      class="tab-btn" 
      [class.active]="activeRole === 'ADMIN'"
      (click)="setActiveRole('ADMIN')">
      <span class="tab-icon">üë®‚Äçüíº</span>
      Administrateur
    </button>
  </div>

  <!-- Formulaire √âl√®ve -->
  <div *ngIf="activeRole === 'ELEVE'" class="form-container">
      <form (ngSubmit)="onSubmit()" #form="ngForm" novalidate class="inscription-form">
        <h2>Inscription √âl√®ve</h2>

  <!-- Champs communs -->
        <div class="form-row">
  <div class="form-group">
            <label for="nom">Nom *</label>
    <input 
      type="text" 
      id="nom"
      name="nom" 
      [(ngModel)]="utilisateur.nom" 
      #nom="ngModel"
      required
      class="form-control"
      [class.is-invalid]="nom.invalid && nom.touched">
          <div *ngIf="nom.invalid && nom.touched" class="invalid-feedback">
        Le nom est requis.
      </div>
  </div>
  
  <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
    <input 
      type="text" 
      id="prenom"
      name="prenom" 
      [(ngModel)]="utilisateur.prenom" 
      #prenom="ngModel"
      required
      class="form-control"
      [class.is-invalid]="prenom.invalid && prenom.touched">
          <div *ngIf="prenom.invalid && prenom.touched" class="invalid-feedback">
        Le pr√©nom est requis.
      </div>
  </div>
        </div>

        <div class="form-row">
          <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email"
            name="email" 
            [(ngModel)]="utilisateur.email" 
            #email="ngModel"
            required
            class="form-control"
            [class.is-invalid]="email.invalid && email.touched">
          <div *ngIf="email.invalid && email.touched" class="invalid-feedback">
            L'email est requis et doit √™tre valide.
              </div>
          </div>
          
        <div class="form-group">
          <label for="mdp">Mot de passe *</label>
          <input 
            type="password" 
            id="mdp"
            name="mdp" 
            [(ngModel)]="utilisateur.mdp" 
            #mdp="ngModel"
            required
            minlength="6"
            class="form-control"
            [class.is-invalid]="mdp.invalid && mdp.touched">
          <div *ngIf="mdp.invalid && mdp.touched" class="invalid-feedback">
            Le mot de passe doit contenir au moins 6 caract√®res.
          </div>
        </div>
      </div>

      <div class="form-row">
          <div class="form-group">
            <label for="sexe">Sexe *</label>
            <select 
              id="sexe"
              name="sexe" 
              [(ngModel)]="utilisateur.sexe" 
              #sexe="ngModel"
              required
              class="form-control"
              [class.is-invalid]="sexe.invalid && sexe.touched">
            <option value="">S√©lectionnez...</option>
            <option *ngFor="let sex of sexes" [value]="sex.value">{{ sex.label }}</option>
            </select>
          <div *ngIf="sexe.invalid && sexe.touched" class="invalid-feedback">
            Le sexe est requis.
          </div>
        </div>

          <div class="form-group">
          <label for="datedenaissance">Date de naissance *</label>
            <input 
            type="date" 
            id="datedenaissance"
            name="datedenaissance" 
            [(ngModel)]="utilisateur.datedenaissance" 
            #datedenaissance="ngModel"
              required
              class="form-control"
            [class.is-invalid]="datedenaissance.invalid && datedenaissance.touched">
          <div *ngIf="datedenaissance.invalid && datedenaissance.touched" class="invalid-feedback">
            La date de naissance est requise.
  </div>
          </div>
        </div>

          <div class="form-group">
        <label for="adresse">Adresse *</label>
        <textarea 
          id="adresse"
          name="adresse" 
          [(ngModel)]="utilisateur.adresse" 
          #adresse="ngModel"
      required
          rows="3"
      class="form-control"
          [class.is-invalid]="adresse.invalid && adresse.touched"
          placeholder="Votre adresse compl√®te"></textarea>
        <div *ngIf="adresse.invalid && adresse.touched" class="invalid-feedback">
          L'adresse est requise.
      </div>
  </div>
  
      <!-- Champs sp√©cifiques √† l'√©l√®ve -->
      <div class="form-row">
  <div class="form-group">
            <label for="niveauScolaire">Niveau scolaire *</label>
            <select 
              id="niveauScolaire"
              name="niveauScolaire" 
              [(ngModel)]="eleveData.niveauScolaire" 
              #niveauScolaire="ngModel"
              required
              class="form-control"
              [class.is-invalid]="niveauScolaire.invalid && niveauScolaire.touched">
            <option value="">S√©lectionnez votre niveau scolaire...</option>
            
            <!-- Pr√©scolaire -->
            <optgroup label="üè´ Pr√©scolaire">
              <option value="cr√®che">Cr√®che</option>
              <option value="maternelle petite section">Maternelle Petite Section</option>
              <option value="maternelle moyenne section">Maternelle Moyenne Section</option>
              <option value="maternelle grande section">Maternelle Grande Section</option>
            </optgroup>
            
            <!-- Primaire -->
            <optgroup label="üìö Primaire">
              <option value="CP (Cours Pr√©paratoire)">CP (Cours Pr√©paratoire)</option>
              <option value="CE1 (Cours √âl√©mentaire 1√®re ann√©e)">CE1 (Cours √âl√©mentaire 1√®re ann√©e)</option>
              <option value="CE2 (Cours √âl√©mentaire 2√®me ann√©e)">CE2 (Cours √âl√©mentaire 2√®me ann√©e)</option>
              <option value="CM1 (Cours Moyen 1√®re ann√©e)">CM1 (Cours Moyen 1√®re ann√©e)</option>
              <option value="CM2 (Cours Moyen 2√®me ann√©e)">CM2 (Cours Moyen 2√®me ann√©e)</option>
            </optgroup>
            
            <!-- Coll√®ge -->
            <optgroup label="üè´ Coll√®ge">
              <option value="6√®me (Sixi√®me)">6√®me (Sixi√®me)</option>
              <option value="5√®me (Cinqui√®me)">5√®me (Cinqui√®me)</option>
              <option value="4√®me (Quatri√®me)">4√®me (Quatri√®me)</option>
              <option value="3√®me (Troisi√®me)">3√®me (Troisi√®me)</option>
            </optgroup>
            
            <!-- Lyc√©e -->
            <optgroup label="üéì Lyc√©e">
              <option value="2nde (Seconde)">2nde (Seconde)</option>
              <option value="1√®re (Premi√®re)">1√®re (Premi√®re)</option>
              <option value="Terminale">Terminale</option>
            </optgroup>
            
            <!-- Sup√©rieur -->
            <optgroup label="üéì Sup√©rieur">
              <option value="Bac +1">Bac +1</option>
              <option value="Bac +2 (DUT, BTS)">Bac +2 (DUT, BTS)</option>
              <option value="Bac +3 (Licence)">Bac +3 (Licence)</option>
              <option value="Bac +4 (Master 1)">Bac +4 (Master 1)</option>
              <option value="Bac +5 (Master 2)">Bac +5 (Master 2)</option>
              <option value="Bac +6 (Doctorat)">Bac +6 (Doctorat)</option>
              <option value="Bac +8 (HDR)">Bac +8 (HDR)</option>
            </optgroup>
            </select>
          <div *ngIf="niveauScolaire.invalid && niveauScolaire.touched" class="invalid-feedback">
                Le niveau scolaire est requis.
          </div>
        </div>

        <div class="form-group">
          <label for="nationalite">Nationalit√© *</label>
          <input 
            type="text" 
            id="nationalite"
            name="nationalite" 
            [(ngModel)]="eleveData.nationalite" 
            #nationalite="ngModel"
            required 
            class="form-control"
            [class.is-invalid]="nationalite.invalid && nationalite.touched">
          <div *ngIf="nationalite.invalid && nationalite.touched" class="invalid-feedback">
            La nationalit√© est requise.
            </div>
        </div>
        </div>

        <div class="form-group">
        <label for="tele">T√©l√©phone *</label>
    <input 
          type="tel" 
          id="tele"
          name="tele" 
          [(ngModel)]="eleveData.tele" 
          #tele="ngModel"
      required
      class="form-control"
          [class.is-invalid]="tele.invalid && tele.touched"
          placeholder="Votre num√©ro de t√©l√©phone">
        <div *ngIf="tele.invalid && tele.touched" class="invalid-feedback">
          Le t√©l√©phone est requis.
            </div>
        </div>

        <!-- Section Parent -->
        <div class="parent-section">
          <h3>Informations du parent</h3>
        
          <div class="parent-choice">
          <label>
            <input 
              type="radio" 
              name="parentChoice" 
              [value]="'existing'"
              [(ngModel)]="parentChoice"
              (change)="setParentChoice('existing')">
            Parent existant
          </label>
          <label>
            <input 
              type="radio" 
              name="parentChoice" 
              [value]="'new'"
              [(ngModel)]="parentChoice"
              (change)="setParentChoice('new')">
            Nouveau parent
          </label>
          </div>

        <div *ngIf="parentChoice === 'existing'">
            <div class="form-row">
              <div class="form-group">
                <label for="parentEmail">Email du parent *</label>
                <input 
                  type="email" 
                  id="parentEmail"
                  name="parentEmail" 
                  [(ngModel)]="eleveData.parentEmail" 
                #parentEmail="ngModel"
                  required
                  class="form-control"
                [class.is-invalid]="parentEmail.invalid && parentEmail.touched">
              <div *ngIf="parentEmail.invalid && parentEmail.touched" class="invalid-feedback">
                L'email du parent est requis.
              </div>
              </div>
            </div>
          </div>

        <div *ngIf="parentChoice === 'new'">
            <div class="form-row">
              <div class="form-group">
                <label for="newParentNom">Nom du parent *</label>
                <input 
                  type="text" 
                  id="newParentNom"
                  name="newParentNom" 
                  [(ngModel)]="eleveData.newParentNom" 
                #newParentNom="ngModel"
                  required
                  class="form-control"
                [class.is-invalid]="newParentNom.invalid && newParentNom.touched">
              <div *ngIf="newParentNom.invalid && newParentNom.touched" class="invalid-feedback">
                Le nom du parent est requis.
              </div>
              </div>
              
              <div class="form-group">
                <label for="newParentPrenom">Pr√©nom du parent *</label>
                <input 
                  type="text" 
                  id="newParentPrenom"
                  name="newParentPrenom" 
                  [(ngModel)]="eleveData.newParentPrenom" 
                #newParentPrenom="ngModel"
                  required
                  class="form-control"
                [class.is-invalid]="newParentPrenom.invalid && newParentPrenom.touched">
              <div *ngIf="newParentPrenom.invalid && newParentPrenom.touched" class="invalid-feedback">
                Le pr√©nom du parent est requis.
              </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="newParentTele">T√©l√©phone du parent *</label>
                <input 
                  type="tel" 
                  id="newParentTele"
                  name="newParentTele" 
                  [(ngModel)]="eleveData.newParentTele" 
                #newParentTele="ngModel"
                  required
                  class="form-control"
                [class.is-invalid]="newParentTele.invalid && newParentTele.touched">
              <div *ngIf="newParentTele.invalid && newParentTele.touched" class="invalid-feedback">
                Le t√©l√©phone du parent est requis.
              </div>
              </div>
              
              <div class="form-group">
                <label for="newParentEmail">Email du parent *</label>
                <input 
                  type="email" 
                  id="newParentEmail"
                  name="newParentEmail" 
                  [(ngModel)]="eleveData.newParentEmail" 
                #newParentEmail="ngModel"
                  required
                  class="form-control"
                [class.is-invalid]="newParentEmail.invalid && newParentEmail.touched">
              <div *ngIf="newParentEmail.invalid && newParentEmail.touched" class="invalid-feedback">
                L'email du parent est requis.
              </div>
            </div>
            </div>
          </div>
        </div>

        <!-- Bouton de soumission -->
        <div class="form-actions">
          <button 
            type="submit" 
          class="btn-submit"
          [disabled]="!isFormValid() || isLoading"
          [class.disabled]="!isFormValid()">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Cr√©ation en cours...' : 'Cr√©er mon compte √©l√®ve' }}
          </button>
        
        <!-- Indicateur de validation -->
        <div class="validation-status" *ngIf="!isFormValid()">
          <small class="text-muted">
            üîç Formulaire incomplet - V√©rifiez tous les champs obligatoires
          </small>
        </div>
        </div>
      </form>
    </div>

  <!-- Formulaire Parent -->
  <div *ngIf="activeRole === 'PARENT'" class="form-container">
      <form (ngSubmit)="onSubmit()" #form="ngForm" novalidate class="inscription-form">
        <h2>Inscription Parent</h2>
        
        <!-- Champs communs -->
        <div class="form-row">
          <div class="form-group">
            <label for="nom">Nom *</label>
            <input 
              type="text" 
              id="nom"
              name="nom" 
              [(ngModel)]="utilisateur.nom" 
              #nom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="nom.invalid && nom.touched">
          <div *ngIf="nom.invalid && nom.touched" class="invalid-feedback">
                Le nom est requis.
              </div>
          </div>
          
          <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
            <input 
              type="text" 
              id="prenom"
              name="prenom" 
              [(ngModel)]="utilisateur.prenom" 
              #prenom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="prenom.invalid && prenom.touched">
          <div *ngIf="prenom.invalid && prenom.touched" class="invalid-feedback">
                Le pr√©nom est requis.
              </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email"
            name="email" 
            [(ngModel)]="utilisateur.email" 
            #email="ngModel"
            required
            class="form-control"
            [class.is-invalid]="email.invalid && email.touched">
          <div *ngIf="email.invalid && email.touched" class="invalid-feedback">
            L'email est requis et doit √™tre valide.
      </div>
  </div>
  
        <div class="form-group">
          <label for="mdp">Mot de passe *</label>
          <input 
            type="password" 
            id="mdp"
            name="mdp" 
            [(ngModel)]="utilisateur.mdp" 
            #mdp="ngModel"
            required
            minlength="6"
            class="form-control"
            [class.is-invalid]="mdp.invalid && mdp.touched">
          <div *ngIf="mdp.invalid && mdp.touched" class="invalid-feedback">
            Le mot de passe doit contenir au moins 6 caract√®res.
          </div>
        </div>
      </div>

      <div class="form-row">
  <div class="form-group">
            <label for="sexe">Sexe *</label>
    <select 
      id="sexe"
      name="sexe" 
      [(ngModel)]="utilisateur.sexe" 
      #sexe="ngModel"
      required
      class="form-control"
      [class.is-invalid]="sexe.invalid && sexe.touched">
            <option value="">S√©lectionnez...</option>
            <option *ngFor="let sex of sexes" [value]="sex.value">{{ sex.label }}</option>
    </select>
          <div *ngIf="sexe.invalid && sexe.touched" class="invalid-feedback">
            Le sexe est requis.
          </div>
  </div>
  
  <div class="form-group">
          <label for="datedenaissance">Date de naissance *</label>
            <input 
            type="date" 
            id="datedenaissance"
            name="datedenaissance" 
            [(ngModel)]="utilisateur.datedenaissance" 
            #datedenaissance="ngModel"
              required
              class="form-control"
            [class.is-invalid]="datedenaissance.invalid && datedenaissance.touched">
          <div *ngIf="datedenaissance.invalid && datedenaissance.touched" class="invalid-feedback">
            La date de naissance est requise.
  </div>
  </div>
</div>

  <div class="form-group">
        <label for="adresse">Adresse *</label>
        <textarea 
          id="adresse"
          name="adresse" 
          [(ngModel)]="utilisateur.adresse" 
          #adresse="ngModel"
      required 
          rows="3"
      class="form-control"
          [class.is-invalid]="adresse.invalid && adresse.touched"
          placeholder="Votre adresse compl√®te"></textarea>
        <div *ngIf="adresse.invalid && adresse.touched" class="invalid-feedback">
          L'adresse est requise.
      </div>
  </div>
      
      <!-- Champs sp√©cifiques au parent -->
      <div class="form-row">
      <div class="form-group">
            <label for="nbr_enfant">Nombre d'enfants *</label>
        <input 
          type="number" 
          id="nbr_enfant"
          name="nbr_enfant" 
          [(ngModel)]="parentData.nbr_enfant" 
            #nbr_enfant="ngModel"
          required
          min="1"
          class="form-control"
            [class.is-invalid]="nbr_enfant.invalid && nbr_enfant.touched">
          <div *ngIf="nbr_enfant.invalid && nbr_enfant.touched" class="invalid-feedback">
            Le nombre d'enfants est requis (minimum 1).
      </div>
        </div>

        <div class="form-group">
          <label for="nationalite">Nationalit√© *</label>
          <input 
            type="text" 
            id="nationalite"
            name="nationalite" 
            [(ngModel)]="parentData.nationalite" 
            #nationalite="ngModel"
            required 
            class="form-control"
            [class.is-invalid]="nationalite.invalid && nationalite.touched">
          <div *ngIf="nationalite.invalid && nationalite.touched" class="invalid-feedback">
            La nationalit√© est requise.
            </div>
        </div>
        </div>

        <div class="form-group">
        <label for="tele">T√©l√©phone *</label>
          <input 
          type="tel" 
          id="tele"
          name="tele" 
          [(ngModel)]="parentData.tele" 
          #tele="ngModel"
            required
            class="form-control"
          [class.is-invalid]="tele.invalid && tele.touched"
          placeholder="Votre num√©ro de t√©l√©phone">
        <div *ngIf="tele.invalid && tele.touched" class="invalid-feedback">
          Le t√©l√©phone est requis.
            </div>
        </div>

        <!-- Bouton de soumission -->
        <div class="form-actions">
          <button 
            type="submit" 
          class="btn-submit"
          [disabled]="!isFormValid() || isLoading">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Cr√©ation en cours...' : 'Cr√©er mon compte parent' }}
          </button>
        </div>
      </form>
    </div>

  <!-- Formulaire Professeur -->
  <div *ngIf="activeRole === 'PROFESSEUR'" class="form-container">
      <form (ngSubmit)="onSubmit()" #form="ngForm" novalidate class="inscription-form">
        <h2>Inscription Enseignant</h2>
        
        <!-- Champs communs -->
        <div class="form-row">
          <div class="form-group">
            <label for="nom">Nom *</label>
            <input 
              type="text" 
              id="nom"
              name="nom" 
              [(ngModel)]="utilisateur.nom" 
              #nom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="nom.invalid && nom.touched">
          <div *ngIf="nom.invalid && nom.touched" class="invalid-feedback">
                Le nom est requis.
              </div>
          </div>
          
          <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
            <input 
              type="text" 
              id="prenom"
              name="prenom" 
              [(ngModel)]="utilisateur.prenom" 
              #prenom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="prenom.invalid && prenom.touched">
          <div *ngIf="prenom.invalid && prenom.touched" class="invalid-feedback">
                Le pr√©nom est requis.
              </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email"
            name="email" 
            [(ngModel)]="utilisateur.email" 
            #email="ngModel"
            required
            class="form-control"
            [class.is-invalid]="email.invalid && email.touched">
          <div *ngIf="email.invalid && email.touched" class="invalid-feedback">
            L'email est requis et doit √™tre valide.
              </div>
          </div>
          
        <div class="form-group">
          <label for="mdp">Mot de passe *</label>
          <input 
            type="password" 
            id="mdp"
            name="mdp" 
            [(ngModel)]="utilisateur.mdp" 
            #mdp="ngModel"
            required
            minlength="6"
            class="form-control"
            [class.is-invalid]="mdp.invalid && mdp.touched">
          <div *ngIf="mdp.invalid && mdp.touched" class="invalid-feedback">
            Le mot de passe doit contenir au moins 6 caract√®res.
          </div>
        </div>
      </div>

      <div class="form-row">
          <div class="form-group">
            <label for="sexe">Sexe *</label>
            <select 
              id="sexe"
              name="sexe" 
              [(ngModel)]="utilisateur.sexe" 
              #sexe="ngModel"
              required
              class="form-control"
              [class.is-invalid]="sexe.invalid && sexe.touched">
            <option value="">S√©lectionnez...</option>
            <option *ngFor="let sex of sexes" [value]="sex.value">{{ sex.label }}</option>
            </select>
          <div *ngIf="sexe.invalid && sexe.touched" class="invalid-feedback">
            Le sexe est requis.
          </div>
        </div>

          <div class="form-group">
          <label for="datedenaissance">Date de naissance *</label>
            <input 
            type="date" 
            id="datedenaissance"
            name="datedenaissance" 
            [(ngModel)]="utilisateur.datedenaissance" 
            #datedenaissance="ngModel"
              required
              class="form-control"
            [class.is-invalid]="datedenaissance.invalid && datedenaissance.touched">
          <div *ngIf="datedenaissance.invalid && datedenaissance.touched" class="invalid-feedback">
            La date de naissance est requise.
          </div>
        </div>
          </div>
      
      <div class="form-group">
        <label for="adresse">Adresse *</label>
        <textarea 
          id="adresse"
          name="adresse" 
          [(ngModel)]="utilisateur.adresse" 
          #adresse="ngModel"
              required
          rows="3"
              class="form-control"
          [class.is-invalid]="adresse.invalid && adresse.touched"
          placeholder="Votre adresse compl√®te"></textarea>
        <div *ngIf="adresse.invalid && adresse.touched" class="invalid-feedback">
          L'adresse est requise.
          </div>
        </div>

      <!-- Champs sp√©cifiques au professeur -->
        <div class="form-row">
          <div class="form-group">
          <label for="filiere">Fili√®re *</label>
              <input 
            type="text" 
            id="filiere"
            name="filiere" 
            [(ngModel)]="professeurData.filiere" 
            #filiere="ngModel"
              required
              class="form-control"
            [class.is-invalid]="filiere.invalid && filiere.touched"
            placeholder="Ex: Sciences, Litt√©rature, etc.">
          <div *ngIf="filiere.invalid && filiere.touched" class="invalid-feedback">
            La fili√®re est requise.
            </div>
        </div>
          
          <div class="form-group">
          <label for="nationalite">Nationalit√© *</label>
            <input 
              type="text" 
            id="nationalite"
            name="nationalite" 
            [(ngModel)]="professeurData.nationalite" 
            #nationalite="ngModel"
              required
              class="form-control"
            [class.is-invalid]="nationalite.invalid && nationalite.touched">
          <div *ngIf="nationalite.invalid && nationalite.touched" class="invalid-feedback">
            La nationalit√© est requise.
          </div>
        </div>
          </div>
          
          <div class="form-group">
        <label for="tele">T√©l√©phone *</label>
        <input 
          type="tel" 
          id="tele"
          name="tele" 
          [(ngModel)]="professeurData.tele" 
          #tele="ngModel"
              required 
              class="form-control"
          [class.is-invalid]="tele.invalid && tele.touched"
          placeholder="Votre num√©ro de t√©l√©phone">
        <div *ngIf="tele.invalid && tele.touched" class="invalid-feedback">
          Le t√©l√©phone est requis.
      </div>
        </div>

      <!-- Mati√®res enseign√©es -->
        <div class="form-group">
        <label>Mati√®res enseign√©es *</label>
        <div class="matieres-grid">
          <label class="matiere-checkbox" *ngFor="let matiere of listeMatieres">
          <input 
              type="checkbox" 
              [value]="matiere"
              (change)="onMatiereChange(matiere, $event)"
              [checked]="professeurData.matieresEnseignees.includes(matiere)">
            {{ matiere }}
          </label>
            </div>
        <div *ngIf="!hasSelectedMatieres" class="invalid-feedback">
          Veuillez s√©lectionner au moins une mati√®re.
        </div>
        </div>

        <!-- Bouton de soumission -->
        <div class="form-actions">
          <button 
            type="submit" 
          class="btn-submit"
          [disabled]="!isFormValid() || isLoading">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Cr√©ation en cours...' : 'Cr√©er mon compte enseignant' }}
          </button>
        </div>
      </form>
    </div>

  <!-- Formulaire Admin -->
  <div *ngIf="activeRole === 'ADMIN'" class="form-container">
      <form (ngSubmit)="onSubmit()" #form="ngForm" novalidate class="inscription-form">
        <h2>Inscription Administrateur</h2>
        
        <!-- Champs communs -->
        <div class="form-row">
          <div class="form-group">
            <label for="nom">Nom *</label>
            <input 
              type="text" 
              id="nom"
              name="nom" 
              [(ngModel)]="utilisateur.nom" 
              #nom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="nom.invalid && nom.touched">
          <div *ngIf="nom.invalid && nom.touched" class="invalid-feedback">
                Le nom est requis.
              </div>
          </div>
          
          <div class="form-group">
            <label for="prenom">Pr√©nom *</label>
            <input 
              type="text" 
              id="prenom"
              name="prenom" 
              [(ngModel)]="utilisateur.prenom" 
              #prenom="ngModel"
              required
              class="form-control"
              [class.is-invalid]="prenom.invalid && prenom.touched">
          <div *ngIf="prenom.invalid && prenom.touched" class="invalid-feedback">
                Le pr√©nom est requis.
              </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email"
            name="email" 
            [(ngModel)]="utilisateur.email" 
            #email="ngModel"
            required
            class="form-control"
            [class.is-invalid]="email.invalid && email.touched">
          <div *ngIf="email.invalid && email.touched" class="invalid-feedback">
            L'email est requis et doit √™tre valide.
              </div>
          </div>
          
        <div class="form-group">
          <label for="mdp">Mot de passe *</label>
          <input 
            type="password" 
            id="mdp"
            name="mdp" 
            [(ngModel)]="utilisateur.mdp" 
            #mdp="ngModel"
            required
            minlength="6"
            class="form-control"
            [class.is-invalid]="mdp.invalid && mdp.touched">
          <div *ngIf="mdp.invalid && mdp.touched" class="invalid-feedback">
            Le mot de passe doit contenir au moins 6 caract√®res.
          </div>
        </div>
      </div>

      <div class="form-row">
          <div class="form-group">
            <label for="sexe">Sexe *</label>
            <select 
              id="sexe"
              name="sexe" 
              [(ngModel)]="utilisateur.sexe" 
              #sexe="ngModel"
              required
              class="form-control"
              [class.is-invalid]="sexe.invalid && sexe.touched">
            <option value="">S√©lectionnez...</option>
            <option *ngFor="let sex of sexes" [value]="sex.value">{{ sex.label }}</option>
            </select>
          <div *ngIf="sexe.invalid && sexe.touched" class="invalid-feedback">
            Le sexe est requis.
          </div>
        </div>

          <div class="form-group">
          <label for="datedenaissance">Date de naissance *</label>
            <input 
            type="date" 
            id="datedenaissance"
            name="datedenaissance" 
            [(ngModel)]="utilisateur.datedenaissance" 
            #datedenaissance="ngModel"
              required
              class="form-control"
            [class.is-invalid]="datedenaissance.invalid && datedenaissance.touched">
          <div *ngIf="datedenaissance.invalid && datedenaissance.touched" class="invalid-feedback">
            La date de naissance est requise.
          </div>
          </div>
        </div>

          <div class="form-group">
        <label for="adresse">Adresse *</label>
        <textarea 
          id="adresse"
          name="adresse" 
          [(ngModel)]="utilisateur.adresse" 
          #adresse="ngModel"
              required
          rows="3"
              class="form-control"
          [class.is-invalid]="adresse.invalid && adresse.touched"
          placeholder="Votre adresse compl√®te"></textarea>
        <div *ngIf="adresse.invalid && adresse.touched" class="invalid-feedback">
          L'adresse est requise.
              </div>
          </div>
          
      <!-- Champs sp√©cifiques √† l'admin -->
      <div class="form-row">
          <div class="form-group">
            <label for="niveauAcces">Niveau d'acc√®s *</label>
          <select 
            id="niveauAcces"
            name="niveauAcces" 
            [(ngModel)]="adminData.niveauAcces" 
            #niveauAcces="ngModel"
            required
            class="form-control"
            [class.is-invalid]="niveauAcces.invalid && niveauAcces.touched">
            <option value="">S√©lectionnez...</option>
            <option value="SUPER_ADMIN">Super Administrateur</option>
            <option value="ADMIN">Administrateur</option>
            <option value="MODERATEUR">Mod√©rateur</option>
            </select>
          <div *ngIf="niveauAcces.invalid && niveauAcces.touched" class="invalid-feedback">
            Le niveau d'acc√®s est requis.
          </div>
        </div>

        <div class="form-group">
          <label for="nationalite">Nationalit√© *</label>
          <input 
            type="text" 
            id="nationalite"
            name="nationalite" 
            [(ngModel)]="adminData.nationalite" 
            #nationalite="ngModel"
            required 
            class="form-control"
            [class.is-invalid]="nationalite.invalid && nationalite.touched">
          <div *ngIf="nationalite.invalid && nationalite.touched" class="invalid-feedback">
            La nationalit√© est requise.
            </div>
        </div>
        </div>

        <div class="form-group">
        <label for="tele">T√©l√©phone *</label>
          <input 
          type="tel" 
          id="tele"
          name="tele" 
          [(ngModel)]="adminData.tele" 
          #tele="ngModel"
            required
            class="form-control"
          [class.is-invalid]="tele.invalid && tele.touched"
          placeholder="Votre num√©ro de t√©l√©phone">
        <div *ngIf="tele.invalid && tele.touched" class="invalid-feedback">
          Le t√©l√©phone est requis.
            </div>
        </div>

  <!-- Bouton de soumission -->
  <div class="form-actions">
    <button 
      type="submit" 
          class="btn-submit"
          [disabled]="!isFormValid() || isLoading">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Cr√©ation en cours...' : 'Cr√©er mon compte administrateur' }}
    </button>
  </div>
</form>
    </div>
</div>